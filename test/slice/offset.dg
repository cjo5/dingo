include "../common.dg"

extern fun main() c_int {
    var arr = [i32]{0, 1, 2, 3, 4}

    putln("arr[:]") // expect: arr[:]
    print_slice(&arr[:]) // expect: 0, 1, 2, 3, 4

    putln("\narr[1:3]") // expect: arr[1:3]
    print_slice(&arr[1:3]) // expect: 1, 2

    putln("\narr[1:]") // expect: arr[1:]
    print_slice(&arr[1:]) // expect: 1, 2, 3, 4

    putln("\narr[:3]") // expect: arr[:3]
    print_slice(&arr[:3]) // expect: 0, 1, 2

    reverse(&var arr[:])

    putln("\nreverse arr[:]") // expect: reverse arr[:]
    print_slice(&arr[:]) // expect: 4, 3, 2, 1, 0

    putln("")

    return 0
}

fun print_slice(slice &[i32]) {
    for i usize = 0; i < len(slice); i++ {
        puti(slice[i])
        if (i+1) < len(slice) {
            put(", ")
        }
    }
}

fun reverse(slice &var [i32]) {
    for i usize = 0; i < len(slice)/2; i++ {
        val tmp = slice[i]
        val j = (len(slice)-1)-i
        slice[i] = slice[j]
        slice[j] = tmp
    }
}
